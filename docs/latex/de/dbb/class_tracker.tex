\hypertarget{class_tracker}{
\section{Tracker Class Reference}
\label{de/dbb/class_tracker}\index{Tracker@{Tracker}}
}


Class used to track contours.  




{\ttfamily \#include $<$tracker.h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_tracker_aaa35d70ca4a3920a4ce932467f07e2db}{Tracker} (QObject $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
\hypertarget{class_tracker_a0ed1e23312cfe7fcfe5f2ac2abd69163}{
\hyperlink{class_tracker_a0ed1e23312cfe7fcfe5f2ac2abd69163}{$\sim$Tracker} ()}
\label{de/dbb/class_tracker_a0ed1e23312cfe7fcfe5f2ac2abd69163}

\begin{DoxyCompactList}\small\item\em Clean up. \item\end{DoxyCompactList}\item 
void \hyperlink{class_tracker_a790cd55c4884027783b373adf5f1867c}{pushNewTouches} (vector$<$ vector$<$ Point $>$ $>$ \&touches, Mat \&mat)
\begin{DoxyCompactList}\small\item\em Method used to add frame contours information to \hyperlink{class_tracker}{Tracker}. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_tracker_a56fa2db181830d3ae47c06cef7c3a8ac}{destroyFrameTouches} (QVector$<$ \hyperlink{class_touch}{Touch} $>$ $\ast$touches)
\begin{DoxyCompactList}\small\item\em Deletes vector of touches. \item\end{DoxyCompactList}\item 
\hypertarget{class_tracker_a812f270cb8d6c2ecb41d404c72fb4f42}{
void \hyperlink{class_tracker_a812f270cb8d6c2ecb41d404c72fb4f42}{destroyAllFrames} ()}
\label{de/dbb/class_tracker_a812f270cb8d6c2ecb41d404c72fb4f42}

\begin{DoxyCompactList}\small\item\em Used to remove all data from frameTouches. \item\end{DoxyCompactList}\item 
void \hyperlink{class_tracker_a6e74d0e762937b997d46dbbff2b8a8f5}{identifyFingers} (QVector$<$ \hyperlink{class_touch}{Touch} $>$ $\ast$touches)
\begin{DoxyCompactList}\small\item\em Function used to identify fingers. \item\end{DoxyCompactList}\item 
long \hyperlink{class_tracker_a051f554f543f0f4d4675e5c727de5e53}{findId} (const \hyperlink{class_touch}{Touch} \&t, QList$<$ QVector$<$ \hyperlink{class_touch}{Touch} $>$ $\ast$ $>$ list, QMap$<$ int, bool $>$ \&takenIds)
\begin{DoxyCompactList}\small\item\em Implements kNN algorithm and calculates id for given touch on the basis of previous frames touches and used ids in this frame. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{class_tracker_a601db61af5b01acaa4b73f13013e52f0}{framesToStore}
\item 
int \hyperlink{class_tracker_afd3b08a68c5e668917f949282dbe9068}{usedIds}
\item 
QList$<$ QVector$<$ \hyperlink{class_touch}{Touch} $>$ $\ast$ $>$ $\ast$ \hyperlink{class_tracker_a702ac376de188e180cd5a8111cf92752}{frameTouches}
\item 
double \hyperlink{class_tracker_a31fcaab957d7fcb34fb32797128f14b4}{maxTravelDistance}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class used to track contours. Methods of this class assigns id to touches on the basis of previous frames using kNN algorithm. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_tracker_aaa35d70ca4a3920a4ce932467f07e2db}{
\index{Tracker@{Tracker}!Tracker@{Tracker}}
\index{Tracker@{Tracker}!Tracker@{Tracker}}
\subsubsection[{Tracker}]{\setlength{\rightskip}{0pt plus 5cm}Tracker::Tracker (
\begin{DoxyParamCaption}
\item[{QObject $\ast$}]{ parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}explicit\mbox{]}}}}
\label{de/dbb/class_tracker_aaa35d70ca4a3920a4ce932467f07e2db}


Constructor. 


\begin{DoxyParams}{Parameters}
{\em parent} & QObject parent \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{class_tracker_a56fa2db181830d3ae47c06cef7c3a8ac}{
\index{Tracker@{Tracker}!destroyFrameTouches@{destroyFrameTouches}}
\index{destroyFrameTouches@{destroyFrameTouches}!Tracker@{Tracker}}
\subsubsection[{destroyFrameTouches}]{\setlength{\rightskip}{0pt plus 5cm}void Tracker::destroyFrameTouches (
\begin{DoxyParamCaption}
\item[{QVector$<$ {\bf Touch} $>$ $\ast$}]{ touches}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a56fa2db181830d3ae47c06cef7c3a8ac}


Deletes vector of touches. 


\begin{DoxyParams}{Parameters}
{\em touches} & \\
\hline
\end{DoxyParams}
\hypertarget{class_tracker_a051f554f543f0f4d4675e5c727de5e53}{
\index{Tracker@{Tracker}!findId@{findId}}
\index{findId@{findId}!Tracker@{Tracker}}
\subsubsection[{findId}]{\setlength{\rightskip}{0pt plus 5cm}long Tracker::findId (
\begin{DoxyParamCaption}
\item[{const {\bf Touch} \&}]{ t, }
\item[{QList$<$ QVector$<$ {\bf Touch} $>$ $\ast$ $>$}]{ list, }
\item[{QMap$<$ int, bool $>$ \&}]{ takenIds}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a051f554f543f0f4d4675e5c727de5e53}


Implements kNN algorithm and calculates id for given touch on the basis of previous frames touches and used ids in this frame. 

When the best id is already taken the next from the list is assigned. When the closest finger to touch is futher than maxTravelDistance (class field) the new id is assigned.


\begin{DoxyParams}{Parameters}
{\em t} & touch to assign id \\
\hline
{\em list} & list of all previous frames touches \\
\hline
{\em takenIds} & map of taken ids \\
\hline
\end{DoxyParams}
\hypertarget{class_tracker_a6e74d0e762937b997d46dbbff2b8a8f5}{
\index{Tracker@{Tracker}!identifyFingers@{identifyFingers}}
\index{identifyFingers@{identifyFingers}!Tracker@{Tracker}}
\subsubsection[{identifyFingers}]{\setlength{\rightskip}{0pt plus 5cm}void Tracker::identifyFingers (
\begin{DoxyParamCaption}
\item[{QVector$<$ {\bf Touch} $>$ $\ast$}]{ touches}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a6e74d0e762937b997d46dbbff2b8a8f5}


Function used to identify fingers. 

How it works:
\begin{DoxyItemize}
\item if no information about previous frames it assignes sequent ids to all touches
\item else, it calls \hyperlink{class_tracker_a051f554f543f0f4d4675e5c727de5e53}{findId()} for each finger 
\begin{DoxyParams}{Parameters}
{\em touches} & collection of touches to be identified \\
\hline
\end{DoxyParams}

\end{DoxyItemize}\hypertarget{class_tracker_a790cd55c4884027783b373adf5f1867c}{
\index{Tracker@{Tracker}!pushNewTouches@{pushNewTouches}}
\index{pushNewTouches@{pushNewTouches}!Tracker@{Tracker}}
\subsubsection[{pushNewTouches}]{\setlength{\rightskip}{0pt plus 5cm}void Tracker::pushNewTouches (
\begin{DoxyParamCaption}
\item[{vector$<$ vector$<$ Point $>$ $>$ \&}]{ touches, }
\item[{Mat \&}]{ mat}
\end{DoxyParamCaption}
)}}
\label{de/dbb/class_tracker_a790cd55c4884027783b373adf5f1867c}


Method used to add frame contours information to \hyperlink{class_tracker}{Tracker}. 

When touches param i empty it cleans up information of all frames. All frame's touches are stored in QList$<$QVector$<$Touch$>$$\ast$$>$ $\ast$frameTouches. Only the last framesToStore frames are stored in frameTouches.

How it works:
\begin{DoxyItemize}
\item Creates QVector of touches on the basis of OpenCV contours
\item calls \hyperlink{class_tracker_a6e74d0e762937b997d46dbbff2b8a8f5}{identifyFingers()} method with created collection
\item if frameTouches is full (has size()==frameToStore) the last frame is removed
\item all touches contours and ids are drawn
\item touches are added do frameTouches collection
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em touches} & OpenCV contours of filtered touches on the surface \\
\hline
{\em mat} & used to draw contours and ids \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\hypertarget{class_tracker_a601db61af5b01acaa4b73f13013e52f0}{
\index{Tracker@{Tracker}!framesToStore@{framesToStore}}
\index{framesToStore@{framesToStore}!Tracker@{Tracker}}
\subsubsection[{framesToStore}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf Tracker::framesToStore}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a601db61af5b01acaa4b73f13013e52f0}
Number of history frames hold in frameTouches. \hypertarget{class_tracker_a702ac376de188e180cd5a8111cf92752}{
\index{Tracker@{Tracker}!frameTouches@{frameTouches}}
\index{frameTouches@{frameTouches}!Tracker@{Tracker}}
\subsubsection[{frameTouches}]{\setlength{\rightskip}{0pt plus 5cm}QList$<$QVector$<${\bf Touch}$>$$\ast$$>$$\ast$ {\bf Tracker::frameTouches}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a702ac376de188e180cd5a8111cf92752}
History of frame touches. \hypertarget{class_tracker_a31fcaab957d7fcb34fb32797128f14b4}{
\index{Tracker@{Tracker}!maxTravelDistance@{maxTravelDistance}}
\index{maxTravelDistance@{maxTravelDistance}!Tracker@{Tracker}}
\subsubsection[{maxTravelDistance}]{\setlength{\rightskip}{0pt plus 5cm}double {\bf Tracker::maxTravelDistance}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_a31fcaab957d7fcb34fb32797128f14b4}
Biggest distance the finger can travel between frames (in pixels). \hypertarget{class_tracker_afd3b08a68c5e668917f949282dbe9068}{
\index{Tracker@{Tracker}!usedIds@{usedIds}}
\index{usedIds@{usedIds}!Tracker@{Tracker}}
\subsubsection[{usedIds}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf Tracker::usedIds}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{de/dbb/class_tracker_afd3b08a68c5e668917f949282dbe9068}
Already used ids. 

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
Modules/tracker.h\item 
Modules/tracker.cpp\end{DoxyCompactItemize}
