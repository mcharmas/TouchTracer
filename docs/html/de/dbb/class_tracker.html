<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TouchTracer: Tracker Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="../../main.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>Tracker Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Tracker" -->
<p>Class used to track contours.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../dc/ded/tracker_8h_source.html">tracker.h</a>&gt;</code></p>

<p><a href="../../d4/dd8/class_tracker-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#aaa35d70ca4a3920a4ce932467f07e2db">Tracker</a> (QObject *parent=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aaa35d70ca4a3920a4ce932467f07e2db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ed1e23312cfe7fcfe5f2ac2abd69163"></a><!-- doxytag: member="Tracker::~Tracker" ref="a0ed1e23312cfe7fcfe5f2ac2abd69163" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a0ed1e23312cfe7fcfe5f2ac2abd69163">~Tracker</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a790cd55c4884027783b373adf5f1867c">pushNewTouches</a> (vector&lt; vector&lt; Point &gt; &gt; &amp;touches, Mat &amp;mat)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Method used to add frame contours information to <a class="el" href="../../de/dbb/class_tracker.html" title="Class used to track contours.">Tracker</a>.  <a href="#a790cd55c4884027783b373adf5f1867c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a56fa2db181830d3ae47c06cef7c3a8ac">destroyFrameTouches</a> (QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; *touches)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes vector of touches.  <a href="#a56fa2db181830d3ae47c06cef7c3a8ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a812f270cb8d6c2ecb41d404c72fb4f42"></a><!-- doxytag: member="Tracker::destroyAllFrames" ref="a812f270cb8d6c2ecb41d404c72fb4f42" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a812f270cb8d6c2ecb41d404c72fb4f42">destroyAllFrames</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to remove all data from frameTouches. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a6e74d0e762937b997d46dbbff2b8a8f5">identifyFingers</a> (QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; *touches)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function used to identify fingers.  <a href="#a6e74d0e762937b997d46dbbff2b8a8f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a051f554f543f0f4d4675e5c727de5e53">findId</a> (const <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &amp;t, QList&lt; QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; * &gt; list, QMap&lt; int, bool &gt; &amp;takenIds)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements kNN algorithm and calculates id for given touch on the basis of previous frames touches and used ids in this frame.  <a href="#a051f554f543f0f4d4675e5c727de5e53"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a601db61af5b01acaa4b73f13013e52f0">framesToStore</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#afd3b08a68c5e668917f949282dbe9068">usedIds</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QList&lt; QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a702ac376de188e180cd5a8111cf92752">frameTouches</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dbb/class_tracker.html#a31fcaab957d7fcb34fb32797128f14b4">maxTravelDistance</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Class used to track contours. </p>
<p>Methods of this class assigns id to touches on the basis of previous frames using kNN algorithm. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aaa35d70ca4a3920a4ce932467f07e2db"></a><!-- doxytag: member="Tracker::Tracker" ref="aaa35d70ca4a3920a4ce932467f07e2db" args="(QObject *parent=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tracker::Tracker </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"> <em>parent</em> = <code>0</code>&#160;)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>QObject parent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a56fa2db181830d3ae47c06cef7c3a8ac"></a><!-- doxytag: member="Tracker::destroyFrameTouches" ref="a56fa2db181830d3ae47c06cef7c3a8ac" args="(QVector&lt; Touch &gt; *touches)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::destroyFrameTouches </td>
          <td>(</td>
          <td class="paramtype">QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; *&#160;</td>
          <td class="paramname"> <em>touches</em>&#160;)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes vector of touches. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">touches</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a051f554f543f0f4d4675e5c727de5e53"></a><!-- doxytag: member="Tracker::findId" ref="a051f554f543f0f4d4675e5c727de5e53" args="(const Touch &amp;t, QList&lt; QVector&lt; Touch &gt; * &gt; list, QMap&lt; int, bool &gt; &amp;takenIds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long Tracker::findId </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &amp;&#160;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QList&lt; QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; * &gt;&#160;</td>
          <td class="paramname"> <em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QMap&lt; int, bool &gt; &amp;&#160;</td>
          <td class="paramname"> <em>takenIds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements kNN algorithm and calculates id for given touch on the basis of previous frames touches and used ids in this frame. </p>
<p>When the best id is already taken the next from the list is assigned. When the closest finger to touch is futher than maxTravelDistance (class field) the new id is assigned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>touch to assign id </td></tr>
    <tr><td class="paramname">list</td><td>list of all previous frames touches </td></tr>
    <tr><td class="paramname">takenIds</td><td>map of taken ids </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6e74d0e762937b997d46dbbff2b8a8f5"></a><!-- doxytag: member="Tracker::identifyFingers" ref="a6e74d0e762937b997d46dbbff2b8a8f5" args="(QVector&lt; Touch &gt; *touches)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::identifyFingers </td>
          <td>(</td>
          <td class="paramtype">QVector&lt; <a class="el" href="../../d1/dff/class_touch.html">Touch</a> &gt; *&#160;</td>
          <td class="paramname"> <em>touches</em>&#160;)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function used to identify fingers. </p>
<p>How it works:</p>
<ul>
<li>if no information about previous frames it assignes sequent ids to all touches</li>
<li>else, it calls <a class="el" href="../../de/dbb/class_tracker.html#a051f554f543f0f4d4675e5c727de5e53" title="Implements kNN algorithm and calculates id for given touch on the basis of previous frames touches an...">findId()</a> for each finger <dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">touches</td><td>collection of touches to be identified </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a790cd55c4884027783b373adf5f1867c"></a><!-- doxytag: member="Tracker::pushNewTouches" ref="a790cd55c4884027783b373adf5f1867c" args="(vector&lt; vector&lt; Point &gt; &gt; &amp;touches, Mat &amp;mat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tracker::pushNewTouches </td>
          <td>(</td>
          <td class="paramtype">vector&lt; vector&lt; Point &gt; &gt; &amp;&#160;</td>
          <td class="paramname"> <em>touches</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"> <em>mat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method used to add frame contours information to <a class="el" href="../../de/dbb/class_tracker.html" title="Class used to track contours.">Tracker</a>. </p>
<p>When touches param i empty it cleans up information of all frames. All frame's touches are stored in QList&lt;QVector&lt;Touch&gt;*&gt; *frameTouches. Only the last framesToStore frames are stored in frameTouches.</p>
<p>How it works:</p>
<ul>
<li>Creates QVector of touches on the basis of OpenCV contours</li>
<li>calls <a class="el" href="../../de/dbb/class_tracker.html#a6e74d0e762937b997d46dbbff2b8a8f5" title="Function used to identify fingers.">identifyFingers()</a> method with created collection</li>
<li>if frameTouches is full (has size()==frameToStore) the last frame is removed</li>
<li>all touches contours and ids are drawn</li>
<li>touches are added do frameTouches collection</li>
</ul>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">touches</td><td>OpenCV contours of filtered touches on the surface </td></tr>
    <tr><td class="paramname">mat</td><td>used to draw contours and ids </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a601db61af5b01acaa4b73f13013e52f0"></a><!-- doxytag: member="Tracker::framesToStore" ref="a601db61af5b01acaa4b73f13013e52f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/dbb/class_tracker.html#a601db61af5b01acaa4b73f13013e52f0">Tracker::framesToStore</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of history frames hold in frameTouches. </p>

</div>
</div>
<a class="anchor" id="a702ac376de188e180cd5a8111cf92752"></a><!-- doxytag: member="Tracker::frameTouches" ref="a702ac376de188e180cd5a8111cf92752" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QList&lt;QVector&lt;<a class="el" href="../../d1/dff/class_touch.html">Touch</a>&gt;*&gt;* <a class="el" href="../../de/dbb/class_tracker.html#a702ac376de188e180cd5a8111cf92752">Tracker::frameTouches</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>History of frame touches. </p>

</div>
</div>
<a class="anchor" id="a31fcaab957d7fcb34fb32797128f14b4"></a><!-- doxytag: member="Tracker::maxTravelDistance" ref="a31fcaab957d7fcb34fb32797128f14b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="../../de/dbb/class_tracker.html#a31fcaab957d7fcb34fb32797128f14b4">Tracker::maxTravelDistance</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Biggest distance the finger can travel between frames (in pixels). </p>

</div>
</div>
<a class="anchor" id="afd3b08a68c5e668917f949282dbe9068"></a><!-- doxytag: member="Tracker::usedIds" ref="afd3b08a68c5e668917f949282dbe9068" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/dbb/class_tracker.html#afd3b08a68c5e668917f949282dbe9068">Tracker::usedIds</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Already used ids. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Modules/<a class="el" href="../../dc/ded/tracker_8h_source.html">tracker.h</a></li>
<li>Modules/tracker.cpp</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Nov 11 2010 15:35:10 for TouchTracer by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
